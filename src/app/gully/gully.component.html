<form #gullyForm="ngForm">
  <div class="controls">
    <label>Height (cm):
      <input type="number" [(ngModel)]="height" name="height" required #heightInput="ngModel"/>
    </label>
    <div *ngIf="heightInput.invalid && heightInput.touched" class="error">
      Height is required
    </div>

    <label>Width (cm):
      <input type="number" [(ngModel)]="width" name="width" required #widthInput="ngModel"/>
    </label>
    <div *ngIf="widthInput.invalid && widthInput.touched" class="error">
      Width is required
    </div>

    <label>Pipe Height (cm):
      <input type="number" [(ngModel)]="pipeHeight" name="pipeHeight" required #pipeHeightInput="ngModel"/>
    </label>
    <div *ngIf="pipeHeightInput.invalid && pipeHeightInput.touched" class="error">
      Pipe Height is required
    </div>

    <label>Pipe Diameter (cm):
      <input type="number" [(ngModel)]="pipeDiameter" name="pipeDiameter" required #pipeDiameterInput="ngModel"/>
    </label>
    <div *ngIf="pipeDiameterInput.invalid && pipeDiameterInput.touched" class="error">
      Pipe Diameter is required
    </div>

    <label>Water Height (cm):
      <input type="number" [(ngModel)]="waterHeightCm" name="waterHeightCm" required #waterHeightInput="ngModel"/>
    </label>
    <div *ngIf="waterHeightInput.invalid && waterHeightInput.touched" class="error">
      Water Height is required
    </div>

    <label>Name:
      <input type="text" [(ngModel)]="gullyName" name="gullyName" required #nameInput="ngModel"/>
    </label>
    <div *ngIf="nameInput.invalid && nameInput.touched" class="error">
      Name is required
    </div>

    <button (click)="save()" [disabled]="!gullyForm.valid">Save Gully</button>
  </div>
</form>

<svg
  [attr.width]="svgWidth"
  [attr.height]="svgHeight"
  class="gully-svg"
>
  <!-- Gully body -->
  <rect
    x="0"
    y="0"
    [attr.width]="width * scale"
    [attr.height]="svgHeight"
    class="gully-body"
  />

  <!-- Water -->
    <rect
    x="0"
    [attr.y]="svgHeight - waterHeight"
    [attr.width]="width * scale"
    [attr.height]="waterHeight"
    class="water"
    />

  <!-- Pipe -->
  <rect
    [attr.x]="width * scale"
    [attr.y]="pipeY - (pipeDiameter * scale / 2)"
    [attr.width]="30 * scale"
    [attr.height]="pipeDiameter * scale"
    class="pipe"
  />

  <!-- Pipe wall: top (red) -->
    <line
    x1="0"
    [attr.y1]="pipeTopY"
    [attr.x2]="(width + 30) * scale"
    [attr.y2]="pipeTopY"
    class="pipe-wall pipe-wall-top"
    />

    <!-- Pipe wall: bottom (yellow) -->
    <line
    x1="0"
    [attr.y1]="pipeBottomY"
    [attr.x2]="(width + 30) * scale"
    [attr.y2]="pipeBottomY"
    class="pipe-wall pipe-wall-bottom"
    />
</svg>
